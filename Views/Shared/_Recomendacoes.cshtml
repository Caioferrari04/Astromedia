@using Microsoft.AspNetCore.Identity;
@* @inject SignInManager<Usuario> SignInManager; *@
@inject UserManager<Usuario> UserManager;
@inject AstroService _service;
@{
    var astros = await _service.GetAllRecommended();
    var usuario = await UserManager.GetUserAsync(User);
}


@foreach (var astro in astros)
{
  <div class="recomendacao">
    <div class="recomendacao-background" style="background-image: url(@astro.Foto);"></div>
    <div class="recomendacao-corpo">
        <header class="recomendacao-titulo">
            <img src="@astro.Foto" class="recomendacao-img" />    
            <h6><a asp-action="PerfilAstro" asp-controller="Feed" asp-route-id="@astro.Id" class="text-white">@astro.Nome</a></h6>
        </header>
        @if (usuario.Astros?.Contains(astro) is true) 
        {
            <a class="button primary botao-recomendacao" asp-action="SairForum" asp-route-id="@astro.Id">Sair de forum</a>
        }
        else 
        {
            <a class="button primary botao-recomendacao" asp-action="EntrarForum" asp-route-id="@astro.Id">Juntar-se</a>
        }
    </div>
</div>  
}

@* <div class="recomendacao">
    <img src="~/img/signin-bg.jpg" class="recomendacao-background" />
    <div class="recomendacao-corpo">
        <header class="recomendacao-titulo">
            <img src="~/img/signin-bg.jpg" class="recomendacao-img" />    
            <h5><a href="~/Feed/PerfilAstro/1" class="text-white">Recomendacao</a></h5>
        </header>
        <button class="button primary botao-recomendacao">Juntar-se</button>
    </div>
</div>
<div class="recomendacao">
    <img src="~/img/signin-bg.jpg" class="recomendacao-background" />
    <div class="recomendacao-corpo">
        <header class="recomendacao-titulo">
            <img src="~/img/signin-bg.jpg" class="recomendacao-img" />    
            <h5><a href="~/Feed/PerfilAstro/1" class="text-white">Recomendacao</a></h5>
        </header>
        <button class="button primary botao-recomendacao">Juntar-se</button>
    </div>
</div> *@
